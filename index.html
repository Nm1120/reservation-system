<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>予約システム</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        td.reserved {
            background-color: #f8d7da;
            color: #721c24;
        }
        td.unavailable {
            background-color: #d3d3d3;
            color: #a9a9a9;
        }
        td.available {
            background-color: #d4edda;
            color: #155724;
            cursor: pointer;
        }
        td.available:hover {
            background-color: #c3e6cb;
        }
        .settings-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }
        .settings-btn:hover {
            background-color: #0056b3;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>予約システム</h1>

    <!-- 設定ボタン -->
    <button class="settings-btn" id="settings-btn">設定</button>

    <!-- パスワード入力画面 -->
    <div id="password-modal" class="hidden">
        <label for="admin-password">パスワードを入力してください:</label>
        <input type="password" id="admin-password">
        <button id="submit-password">確認</button>
    </div>

    <!-- 予約フォーム -->
    <form id="reservation-form">
        <label for="name">お名前:</label>
        <input type="text" id="name" required>
        
        <label for="date">希望日:</label>
        <select id="date" required>
            <option value="10/14">10/14</option>
            <option value="10/15">10/15</option>
            <option value="10/16">10/16</option>
            <option value="10/17">10/17</option>
            <option value="10/18">10/18</option>
            <option value="10/19">10/19</option>
            <option value="10/20">10/20</option>
            <option value="10/21">10/21</option>
            <option value="10/22">10/22</option>
            <option value="10/23">10/23</option>
            <option value="10/24">10/24</option>
        </select>

        <label for="time">希望時間:</label>
        <select id="time" required>
            <option value="09:00">09:00</option>
            <option value="10:00">10:00</option>
            <option value="11:00">11:00</option>
            <option value="12:00">12:00</option>
            <option value="13:00">13:00</option>
            <option value="14:00">14:00</option>
            <option value="15:00">15:00</option>
            <option value="16:00">16:00</option>
            <option value="17:00">17:00</option>
        </select>

        <button type="submit">予約する</button>
    </form>

    <!-- カレンダー表 -->
    <table id="reservationTable">
        <thead>
            <tr>
                <th>時間</th>
                <th>10/14</th>
                <th>10/15</th>
                <th>10/16</th>
                <th>10/17</th>
                <th>10/18</th>
                <th>10/19</th>
                <th>10/20</th>
                <th>10/21</th>
                <th>10/22</th>
                <th>10/23</th>
                <th>10/24</th>
            </tr>
        </thead>
        <tbody>
            <!-- 時間帯を行に追加 -->
            <tr>
                <th>09:00</th>
                <td class="available" data-date="10/14" data-time="09:00"></td>
                <td class="available" data-date="10/15" data-time="09:00"></td>
                <td class="available" data-date="10/16" data-time="09:00"></td>
                <td class="available" data-date="10/17" data-time="09:00"></td>
                <td class="available" data-date="10/18" data-time="09:00"></td>
                <td class="available" data-date="10/19" data-time="09:00"></td>
                <td class="available" data-date="10/20" data-time="09:00"></td>
                <td class="available" data-date="10/21" data-time="09:00"></td>
                <td class="available" data-date="10/22" data-time="09:00"></td>
                <td class="available" data-date="10/23" data-time="09:00"></td>
                <td class="available" data-date="10/24" data-time="09:00"></td>
            </tr>
            <tr>
                <th>10:00</th>
                <td class="available" data-date="10/14" data-time="10:00"></td>
                <td class="available" data-date="10/15" data-time="10:00"></td>
                <td class="available" data-date="10/16" data-time="10:00"></td>
                <td class="available" data-date="10/17" data-time="10:00"></td>
                <td class="available" data-date="10/18" data-time="10:00"></td>
                <td class="available" data-date="10/19" data-time="10:00"></td>
                <td class="available" data-date="10/20" data-time="10:00"></td>
                <td class="available" data-date="10/21" data-time="10:00"></td>
                <td class="available" data-date="10/22" data-time="10:00"></td>
                <td class="available" data-date="10/23" data-time="10:00"></td>
                <td class="available" data-date="10/24" data-time="10:00"></td>
            </tr>
            <tr>
                <th>11:00</th>
                <td class="available" data-date="10/14" data-time="11:00"></td>
                <td class="available" data-date="10/15" data-time="11:00"></td>
                <td class="available" data-date="10/16" data-time="11:00"></td>
                <td class="available" data-date="10/17" data-time="11:00"></td>
                <td class="available" data-date="10/18" data-time="11:00"></td>
                <td class="available" data-date="10/19" data-time="11:00"></td>
                <td class="available" data-date="10/20" data-time="11:00"></td>
                <td class="available" data-date="10/21" data-time="11:00"></td>
                <td class="available" data-date="10/22" data-time="11:00"></td>
                <td class="available" data-date="10/23" data-time="11:00"></td>
                <td class="available" data-date="10/24" data-time="11:00"></td>
            </tr>
            <tr>
                <th>12:00</th>
                <td class="available" data-date="10/14" data-time="12:00"></td>
                <td class="available" data-date="10/15" data-time="12:00"></td>
                <td class="available" data-date="10/16" data-time="12:00"></td>
                <td class="available" data-date="10/17" data-time="12:00"></td>
                <td class="available" data-date="10/18" data-time="12:00"></td>
                <td class="available" data-date="10/19" data-time="12:00"></td>
                <td class="available" data-date="10/20" data-time="12:00"></td>
                <td class="available" data-date="10/21" data-time="12:00"></td>
                <td class="available" data-date="10/22" data-time="12:00"></td>
                <td class="available" data-date="10/23" data-time="12:00"></td>
                <td class="available" data-date="10/24" data-time="12:00"></td>
            </tr>
            <tr>
                <th>13:00</th>
                <td class="available" data-date="10/14" data-time="13:00"></td>
                <td class="available" data-date="10/15" data-time="13:00"></td>
                <td class="available" data-date="10/16" data-time="13:00"></td>
                <td class="available" data-date="10/17" data-time="13:00"></td>
                <td class="available" data-date="10/18" data-time="13:00"></td>
                <td class="available" data-date="10/19" data-time="13:00"></td>
                <td class="available" data-date="10/20" data-time="13:00"></td>
                <td class="available" data-date="10/21" data-time="13:00"></td>
                <td class="available" data-date="10/22" data-time="13:00"></td>
                <td class="available" data-date="10/23" data-time="13:00"></td>
                <td class="available" data-date="10/24" data-time="13:00"></td>
            </tr>
            <tr>
                <th>14:00</th>
                <td class="available" data-date="10/14" data-time="14:00"></td>
                <td class="available" data-date="10/15" data-time="14:00"></td>
                <td class="available" data-date="10/16" data-time="14:00"></td>
                <td class="available" data-date="10/17" data-time="14:00"></td>
                <td class="available" data-date="10/18" data-time="14:00"></td>
                <td class="available" data-date="10/19" data-time="14:00"></td>
                <td class="available" data-date="10/20" data-time="14:00"></td>
                <td class="available" data-date="10/21" data-time="14:00"></td>
                <td class="available" data-date="10/22" data-time="14:00"></td>
                <td class="available" data-date="10/23" data-time="14:00"></td>
                <td class="available" data-date="10/24" data-time="14:00"></td>
            </tr>
            <tr>
                <th>15:00</th>
                <td class="available" data-date="10/14" data-time="15:00"></td>
                <td class="available" data-date="10/15" data-time="15:00"></td>
                <td class="available" data-date="10/16" data-time="15:00"></td>
                <td class="available" data-date="10/17" data-time="15:00"></td>
                <td class="available" data-date="10/18" data-time="15:00"></td>
                <td class="available" data-date="10/19" data-time="15:00"></td>
                <td class="available" data-date="10/20" data-time="15:00"></td>
                <td class="available" data-date="10/21" data-time="15:00"></td>
                <td class="available" data-date="10/22" data-time="15:00"></td>
                <td class="available" data-date="10/23" data-time="15:00"></td>
                <td class="available" data-date="10/24" data-time="15:00"></td>
            </tr>
            <tr>
                <th>16:00</th>
                <td class="available" data-date="10/14" data-time="16:00"></td>
                <td class="available" data-date="10/15" data-time="16:00"></td>
                <td class="available" data-date="10/16" data-time="16:00"></td>
                <td class="available" data-date="10/17" data-time="16:00"></td>
                <td class="available" data-date="10/18" data-time="16:00"></td>
                <td class="available" data-date="10/19" data-time="16:00"></td>
                <td class="available" data-date="10/20" data-time="16:00"></td>
                <td class="available" data-date="10/21" data-time="16:00"></td>
                <td class="available" data-date="10/22" data-time="16:00"></td>
                <td class="available" data-date="10/23" data-time="16:00"></td>
                <td class="available" data-date="10/24" data-time="16:00"></td>
            </tr>
            <tr>
                <th>17:00</th>
                <td class="available" data-date="10/14" data-time="17:00"></td>
                <td class="available" data-date="10/15" data-time="17:00"></td>
                <td class="available" data-date="10/16" data-time="17:00"></td>
                <td class="available" data-date="10/17" data-time="17:00"></td>
                <td class="available" data-date="10/18" data-time="17:00"></td>
                <td class="available" data-date="10/19" data-time="17:00"></td>
                <td class="available" data-date="10/20" data-time="17:00"></td>
                <td class="available" data-date="10/21" data-time="17:00"></td>
                <td class="available" data-date="10/22" data-time="17:00"></td>
                <td class="available" data-date="10/23" data-time="17:00"></td>
                <td class="available" data-date="10/24" data-time="17:00"></td>
            </tr>
        </tbody>
    </table>

    <script>
        document.getElementById('settings-btn').addEventListener('click', function() {
            // 設定ボタンが押されたらパスワード入力欄を表示
            document.getElementById('password-modal').classList.remove('hidden');
        });

        document.getElementById('submit-password').addEventListener('click', function() {
            const password = document.getElementById('admin-password').value;
            if (password === '0000') {
                alert('設定モードが有効になりました。無理な時間を設定できます。');
                document.getElementById('password-modal').classList.add('hidden');
                
                // 管理者が無理な時間をクリックすると無理と設定
                document.querySelectorAll('.available').forEach(cell => {
                    cell.addEventListener('click', function() {
                        if (confirm("この時間を無理に設定しますか？")) {
                            this.classList.remove('available');
                            this.classList.add('unavailable');
                            this.textContent = '無理';
                        }
                    });
                });
            } else {
                alert('パスワードが間違っています。');
            }
        });

        document.getElementById('reservation-form').addEventListener('submit', function(event) {
            event.preventDefault(); // フォームのデフォルト動作を無効化
            const selectedName = document.getElementById('name').value;
            const selectedDate = document.getElementById('date').value;
            const selectedTime = document.getElementById('time').value;

            // 選択された日付と時間のセルを探す
            const selectedCell = document.querySelector(`td[data-date="${selectedDate}"][data-time="${selectedTime}"]`);

            // すでに予約されていない場合のみ、予約を確定
            if (selectedCell && !selectedCell.classList.contains('reserved') && !selectedCell.classList.contains('unavailable')) {
                selectedCell.classList.remove('available');
                selectedCell.classList.add('reserved');
                selectedCell.textContent = selectedName; // 名前を表示
            } else {
                alert('その時間はすでに予約されているか、無理に設定されています。');
            }
        });
    </script>
</body>
</html>
